<%- include('../inc/header.ejs') %>

<div style="display: flex;" class="alert alert-info">
    <div style="display: flex;">
      <h2>Lịch Sử Mua Hàng Của</h2>
    </div>
  </div>
<div style="display: flex;" class="grid gap-0 column-gap-3">
  <div style="flex-basis: 100%; margin-left: 0%;">
    <table class="table table-striped table-sm" style="flex-basis: 80%;">
      <thead>
        <tr class="table-dark">
          <th>Ảnh sản phẩm</th>
          <th>Tên sản phẩm</th>
          <th>Số lượng</th>
          <th>Trạng thái đơn hàng</th>
        </tr>
      </thead>
      <tbody>
        <% transactions.forEach(transaction => { %>
          <% transaction.cart.forEach(item => { %>
            <tr>
              <td><img src="<%= item.products.image %>" alt="Ảnh sản phẩm" width="50" height="50"></td>
              <td><%= item.products.productName %></td>
              <td><%= item.soLuong %></td>
              <td>
                <% switch(transaction.trangThai) { 
                  case 0: %>
                    Đã hủy
                    <% break; 
                  case 1: %>
                    Chờ xác nhận
                    <% break; 
                  case 2: %>
                    Chờ lấy hàng
                    <% break; 
                  case 3: %>
                    Đang giao
                    <% break; 
                  case 4: %>
                    Đã giao
                    <% break; 
                } %>
              </td>
            </tr>
          <% }) %>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>
<div class="pagination">
        <a href="?page=<%= currentPage - 1 %>" class="btn btn-primary">Trước</a>
    <span class="current-page btn btn-secondary disabled"><%= currentPage %></span>
    <a href="?page=<%= currentPage + 1 %>" class="btn btn-primary">Tiếp theo</a>
</div>


<%- include('../inc/footer.ejs') %>
